dist: xenial
language: java

notifications:
  email: false

jdk:
  - openjdk10
  - openjdk11

cache:
  directories:
    - $HOME/.m2

before_script:
  - "export DISPLAY=:99.0"
  - "sh -e /etc/init.d/xvfb start"
  - sleep 3 # give xvfb some time to start

script:
  - mvn test -B
  - mvn clean package -DskipTests=true
  - ./smoketest/smoke_test.sh
